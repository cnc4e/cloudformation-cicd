AWSTemplateFormatVersion: "2010-09-09"
Description: "EC2 instance with encrypted EBS volume for AWS CloudFormation Guard Testing"
Parameters:
  SubnetId:
    Description: SubnetId
    Type: AWS::EC2::Subnet::Id
    Default: subnet-01107ffce54c1793c
  ImageId:
    Description: Amazon Linux 2 AMI ap-northeast
    Type: AWS::EC2::Image::Id
    Default: ami-00d101850e971728d

Resources:
  EC2Instance:
    Type: AWS::EC2::Instance
    Properties:
      ImageId: !Ref ImageId
      InstanceType: 't3.micro'
      SubnetId: !Ref SubnetId
      BlockDeviceMappings:
      - DeviceName: /dev/sdf
        Ebs:
          VolumeSize: 50
          VolumeType: gp2
      Tags:
      - Key: Name
        Value: cfn-cicd-ec2
    DeletionPolicy: Delete

Outputs:
  InstanceID:
    Description: The Instance ID
    Value: !Ref EC2Instance